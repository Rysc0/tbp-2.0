-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."Isplata"
(
    "ID" serial NOT NULL,
    "ZaposlenikID" integer NOT NULL,
    "Datum" timestamp without time zone NOT NULL,
    "Plaća" integer NOT NULL,
    CONSTRAINT "Isplata_pkey" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."Plaća"
(
    "ID" serial NOT NULL,
    "Netto" double precision NOT NULL,
    "Brutto" double precision NOT NULL,
    "Zdravstveno" double precision NOT NULL,
    "Mirovinsko" double precision NOT NULL,
    "Putni trošak" double precision,
    "Total" double precision NOT NULL,
    CONSTRAINT "Plaća_pkey" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."Radno mjesto"
(
    "ID" serial NOT NULL,
    "Radno mjesto" text NOT NULL,
    CONSTRAINT "Radno mjesto_pkey" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."Status"
(
    "ID" serial NOT NULL,
    "Status" text NOT NULL,
    CONSTRAINT "Status_pkey" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."Trošak"
(
    "ID" serial NOT NULL,
    "Opis" text COLLATE pg_catalog."default",
    "Iznos" double precision NOT NULL,
    "Datum" date NOT NULL,
    "Vrsta" integer NOT NULL,
    CONSTRAINT "Trošak_pkey" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."Trošak_Vrsta"
(
    "ID" serial NOT NULL,
    "Naziv" text NOT NULL,
    CONSTRAINT "Trošak_Vrsta_pkey" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."Vozilo"
(
    "ID" serial NOT NULL,
    "Marka" text NOT NULL,
    "Reg. tablice" character varying(10) NOT NULL,
    "Vrijeme zadnjeg servisa" date NOT NULL,
    "Vrijeme idućeg servisa" date NOT NULL,
    "Vrijeme zadnje registracije" date NOT NULL,
    "Istek registracije" date NOT NULL,
    "Potrošnja" double precision NOT NULL,
    "Kilometraža" integer NOT NULL,
    "Zapremina rezervara" integer NOT NULL,
    CONSTRAINT "Vozilo_pkey" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."WorkLog"
(
	"ID" serial NOT NULL,
    "ZaposlenikID" integer NOT NULL,
    "Datum" date NOT NULL,
    "Status" integer NOT NULL,
    "Vozilo" integer,
    "Kilometraža" integer,
    "Dnevnik" text,
    "Trošak" integer,
    CONSTRAINT "WorkLog_pkey" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."Zaposlenik"
(
    "ID" serial NOT NULL,
    "Ime i prezime" text NOT NULL,
    "Kontakt" text NOT NULL,
    "Plaća" integer NOT NULL,
    "Lozinka" text NOT NULL,
    "Email" text NOT NULL,
    "Radno vrijeme pocetak" time without time zone NOT NULL,
    "Radno vrijeme kraj" time without time zone NOT NULL,
    "Vozilo" integer,
    "Radno mjesto" integer NOT NULL,
    "Zaposlen" date NOT NULL,
    CONSTRAINT "Zaposlenik_pkey" PRIMARY KEY ("ID")
);

ALTER TABLE IF EXISTS public."Isplata"
    ADD FOREIGN KEY ("ZaposlenikID")
    REFERENCES public."Zaposlenik" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Isplata"
    ADD FOREIGN KEY ("Plaća")
    REFERENCES public."Plaća" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Radno mjesto"
    ADD FOREIGN KEY ("ID")
    REFERENCES public."Zaposlenik" ("Radno mjesto") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Trošak"
    ADD FOREIGN KEY ("ID")
    REFERENCES public."WorkLog" ("Trošak") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Trošak"
    ADD FOREIGN KEY ("Vrsta")
    REFERENCES public."Trošak_Vrsta" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."WorkLog"
    ADD FOREIGN KEY ("ZaposlenikID")
    REFERENCES public."Zaposlenik" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."WorkLog"
    ADD FOREIGN KEY ("Vozilo")
    REFERENCES public."Vozilo" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."WorkLog"
    ADD FOREIGN KEY ("Status")
    REFERENCES public."Status" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Zaposlenik"
    ADD FOREIGN KEY ("Vozilo")
    REFERENCES public."Vozilo" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Zaposlenik"
    ADD FOREIGN KEY ("Plaća")
    REFERENCES public."Plaća" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;